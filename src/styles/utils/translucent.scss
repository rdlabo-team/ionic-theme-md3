@use 'api';

ion-header.ios:not(.ios26-disabled).header-translucent,
ion-footer.ios:not(.ios26-disabled).footer-translucent {
  .header-background,
  .footer-background {
    backdrop-filter: none;
  }

  ion-toolbar {
    --border-width: 0;
    --background: transparent;
    --opacity: 1;
    &::part(background) {
      --opacity: 0;
    }
    ion-title {
      filter: blur(0);
      transform: translateY(0);
    }
  }
}

ion-header.ios:not(.ios26-disabled).header-collapse-main ion-toolbar.in-toolbar ion-title {
  transition: all 0.5s ease-in-out;
}

ion-header.ios:not(.ios26-disabled).header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,
ion-header.ios:not(.ios26-disabled).header-collapse-condense-inactive:not(.header-collapse-condense)
  ion-toolbar.in-toolbar
  ion-buttons.buttons-collapse {
  filter: blur(2px);
  transform: translateY(8px);
}

ion-header.header-translucent::before,
ion-header.header-translucent::after,
ion-content.ios:not(.ios26-disabled)::part(background)::before,
ion-content.ios:not(.ios26-disabled)::part(background)::after {
  content: '';
  position: absolute;
  width: 100%;
  pointer-events: none;
  z-index: 1;
}

ion-header.ios:not(.ios26-disabled).header-translucent::before {
  /**
   * With safe-area effect, this is need.
   */
  z-index: 2;
  top: 0;
  height: var(--ion-safe-area-top);
}

ion-header.ios:not(.ios26-disabled).header-translucent::after {
  z-index: 2;
  top: 0;
  height: calc(68px + max(calc(var(--ion-safe-area-top) - 14px), 4px));
  backdrop-filter: blur(2px);
  mask-image: linear-gradient(rgba(0, 0, 0, 1) 80%, rgba(0, 0, 0, 0) 100%);
  mask-composite: intersect;
}

/**
 * ここから下は、ion-content::before/afterが content:'' を持たない限り表示されない
 */
.ion-page:has(> ion-header.header-translucent) > ion-content::part(background)::before {
  z-index: 2;
  top: 0;
  height: calc(68px + max(calc(var(--ion-safe-area-top) - 14px), 4px));
  background: linear-gradient(
    in oklab,
    rgba(var(--ios26-content-box-shadow-rgb), 0.5) 20%,
    rgba(var(--ios26-content-box-shadow-rgb), 0) 100%
  );
  box-shadow: inset 0 calc(68px + max(calc(var(--ion-safe-area-top) - 14px), 4px)) 16px -32px rgba(var(--ios26-content-box-shadow-rgb), 0.6);
}

ion-content::part(background)::after {
  z-index: 2;
  bottom: 0;
  height: calc(60px + var(--ios26-floating-safe-area-bottom));
  background: linear-gradient(
    in oklab,
    rgba(var(--ios26-content-box-shadow-rgb), 0) 0%,
    rgba(var(--ios26-content-box-shadow-rgb), 0.8) 50%,
    rgba(var(--ios26-content-box-shadow-rgb), 0.8) 100%
  );
}

.ion-page:has(> ion-footer:not(.footer-translucent)) ion-content::part(background)::after {
  content: none;
}
